# Experimental Configuration: Comprehensive Time Series Features
# This config extends the base config with expanded lag and rolling features

# Data paths (relative to project root)
paths:
  raw_data_dir: "Raw Data"
  processed_data_dir: "Processed Data"
  results_dir: "results/experimental"
  plots_dir: "results/experimental/plots"
  
  # Subdirectories
  climate_data_dir: "Raw Data/Climate Data 2"
  atmospheric_data_dir: "Raw Data/Atmospheric CSV"
  illness_data_dir: "Raw Data/Illness data"
  
  # Output paths
  merged_env_output: "Processed Data/Merged Data/merged_env.csv"
  illness_env_output_dir: "Processed Data/Illness & Environmental/Grouped"
  regression_results_dir: "results/experimental/models"

# Data processing parameters
data_processing:
  years: [2018, 2019, 2020, 2021, 2022, 2023]
  aggregation_methods:
    temperature: "mean"
    rainfall: "sum"
    pressure: "mean"
    wind: "max"
  missing_value_strategy: "interpolate"

# Feature engineering - EXPERIMENTAL: Comprehensive time series
features:
  # Lag features: 1-14 days (comprehensive)
  lag_days: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
  lag_features: ["Case_Count", "AvgTemp", "PM10", "AvgHumidity"]
  
  # Rolling window features for original features
  rolling_windows: [7, 14]
  rolling_features: ["Case_Count", "AvgTemp", "PM10", "AvgHumidity"]
  rolling_stats: ["mean", "std"]
  
  # NEW: Rolling mean for each lag feature (1-14 days)
  # This creates rolling means for lag features themselves
  rolling_mean_for_lags: true
  rolling_mean_windows: [3, 7]  # Rolling windows for lag features
  
  # Temporal features
  temporal_features: true
  include_season: true

# Model parameters
model:
  xgboost:
    objective: "reg:squarederror"
    random_state: 42
    n_jobs: -1
    verbosity: 0
  
  rfecv:
    step: 5
    min_features_to_select: 20
    cv_splits: 3
    scoring: "neg_root_mean_squared_error"
  
  optuna:
    n_trials: 50
    direction: "minimize"
    timeout: null
  
  hyperparameter_space:
    n_estimators: [100, 1500]
    learning_rate: [0.001, 0.3]
    max_depth: [3, 10]
    subsample: [0.5, 1.0]
    colsample_bytree: [0.5, 1.0]
    gamma: [1e-8, 1.0]
    reg_alpha: [1e-8, 1.0]
    reg_lambda: [1e-8, 1.0]

# Training parameters
training:
  train_size: 0.70
  val_size: 0.15
  test_size: 0.15
  early_stopping_rounds: 50
  max_iterations: 1000
  cv_splits: 5
  cv_shuffle: true

# Evaluation
evaluation:
  metrics: ["r2", "rmse", "mae", "mape"]
  save_predictions: true
  save_feature_importance: true
  plot_predictions: true

# Illness-specific settings
illness:
  default_illness: "Acute_upper_respiratory_infections"
  default_lag_days: 0
  excluded_vars: ["MaxWindDir", "Year_x", "Year_y", "RegionCode", "Month", 
                  "ParsedDateTime", "IllnessName", "DateTime"]
